<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>Web Wizards</title>
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;400;700&display=swap" rel="stylesheet">
   <script src="../public/scripts/tools.js"></script>
   <script src="../public/scripts/notification.js" type="module" defer></script>
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="../public/styles/style.css" rel="stylesheet">
   <script type="module">
      import * as crud from '../public/scripts/forms/crud.js';
      document.addEventListener('DOMContentLoaded', async () => {
         await fetchData();
         const productform = document.getElementById('productform');
         productform.addEventListener('submit', async (event) => {
            event.preventDefault();
            await crud.newProduct(document.getElementById('SupplierID'), document.getElementById('ProductName'), document.getElementById('ProductNumber'));
         });

         const userform = document.getElementById('userform');
         userform.addEventListener('submit', async (event) => {
            event.preventDefault();
            await crud.newUser(document.getElementById('FName'), document.getElementById('MName'), document.getElementById('LName'), document.getElementById('Email'), document.getElementById('Password'), document.getElementById('RoleID'));
         });

         const supplierform = document.getElementById('supplierform');
         supplierform.addEventListener('submit', async (event) => {
            event.preventDefault();
            await crud.newSupplier(document.getElementById('SupplierName'));
         });
      });
   </script>
   <!--  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" >
         <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>-->
</head>

<body>
   <!-- Nav Bar -->
   <header>
      <script src="https://kit.fontawesome.com/20313c72b7.js" crossorigin="anonymous"></script>
      <nav class="navbar navbar-default">
         <div class="row">
            <div class="col-lg-1"></div>
            <div class="col-lg-10">
               <div class="container-fluid">
                  <div class="navbar-header" style="height: 60px;">
                     <a href="index.html" class="navbar-brand"><img src="../public/images/Crossfire_Logo_no_bkgd.png"
                           alt="A blue logo saying Crossfire with a flame in the middle" width="200" height="60"
                           class="d-inline-block align-top"></a>
                  </div>
                  <span class="navbar-text" style="line-height: 80px;"><i class="fa-solid fa-ellipsis-vertical"
                        style="font-size: 1.5em;"></i></span>
                  <h1 class="navbar-text" style="line-height: 80px;">Tools</h1>
                  <ul class="nav navbar-nav navbar-right">
                     <li><a href="#"><button class="notification" id="btnNotification"><i class="fa-solid fa-bell"
                                 style="font-size: 2em; line-height: 80px;"></i>
                              <span class="badge" id="notification-count">0</span>
                           </button></a></li>

                     <span class="navbar-text" style="line-height: 80px;"><i class="fa-solid fa-ellipsis-vertical"
                           style="font-size: 1.5em;"></i></span>
                     <span class="navbar-text" style="line-height: 80px; font-size: 2em;"><i
                           class="fa-solid fa-user"></i>Username</span>
                     <li><a href="#"><i class="fa-solid fa-right-from-bracket"
                              style="font-size: 2em; line-height: 80px;"></i></a></li>
                     <span class="navbar-text" style="line-height: 80px;"><i class="fa-solid fa-ellipsis-vertical"
                           style="font-size: 1.5em;"></i></span>
                     <li><a href="#"><i class="fa-solid fa-circle-info"
                              style="font-size: 2em; line-height: 80px;"></i></a></li>
                  </ul>
                  <div class="navbar-collapse"></div>
                  <ul class="nav navbar-nav">
                     <li><a href="index.html">Dashboard</a></li>
                     <li><a href="create.html">Create NCR</a></li>
                     <li><a href="list.html">NCR Logs</a></li>
                     <li class="active"><a href="tools.html">Tools</a></li>
                  </ul>
               </div>
            </div>
            <div class="col-lg-1"></div>
            <!-- Notification Modal -->
         <div id="notification-modal" class="modal" style="z-index: 150;">
            <!-- Modal content -->
            <div class="modal-content" id="notification-content">
               <span class="close" id="close-modal">&times;</span>
               <div class="notification-container" id="qlt-list">
                  <h3>New NCRs</h3>
                  <ul id="new-qlt-list"></ul>
                  <h3>Updated NCRs</h3>
                  <ul id="updated-qlt-list"></ul>
               </div>
               <div class="notification-container" id="eng-list">
                  <h3>Closed Quality NCRs</h3>
                  <ul id="closed-qlt-list"></ul>
                  <h3>New NCRs</h3>
                  <ul id="new-eng-list"></ul>
                  <h3>Updated NCRs</h3>
                  <ul id="updated-eng-list"></ul>
               </div>
            </div>
         </div>
         </div>
      </nav>
   </header>

   <!--Tools Container-->
   <div class="container-tools">
      <nav id="nav" class="tools">
         <div class="top">
            <ul>
               <li>
                  <a href="#" onclick="toggleSection('users')">
                     <i class="fa-solid fa-user"></i>
                     Users
                  </a>
               </li>
            </ul>
            <ul>
               <li>
                  <a href="#" onclick="toggleSection('products')">
                     <i class="fa-solid fa-box"></i>
                     Products
                  </a>
               </li>
            </ul>
            <ul>
               <li>
                  <a href="#" onclick="toggleSection('suppliers')">
                     <i class="fa-solid fa-truck"></i>
                     Suppliers
                  </a>
               </li>
            </ul>
         </div>
      </nav>
      <!-- User Section -->
      <div>
         <section class="content-section tools" id="users">
            <div class="container tools">
               <form class="px-4" id="userform">
                  <fieldset>
                     <legend>Enter User Information</legend>
                     <div class="row g-3">
                        <div class="form-group col-md-4">
                           <input type="text" id="FName" name="FName" placeholder="First name" aria-label="First name">
                        </div>
                        <div class="form-group col-md-4">
                           <input type="text" id="MName" name="MName" placeholder="Middle name"
                              aria-label="Middle name">
                        </div>
                        <div class="form-group col-md-4">
                           <input type="text" id="LName" name="LName" placeholder="Last name" aria-label="Last name">
                        </div>
                     </div>
                     <div class="row g-3">
                        <div class="form-group col-md-4">
                           <input type="email" id="Email" name="Email" placeholder="Email" aria-label="Email">
                        </div>
                        <div class="form-group col-md-4">
                           <input type="password" id="Password" name="Password" placeholder="Password"
                              aria-label="Password">
                        </div>
                        <div class="form-group col-md-4">
                           <select id="RoleID" name="RoleID">
                              <option value="" disabled selected>Select a role</option>
                           </select>
                        </div>
                        <div class="form-group col-md-12">
                           <button type="submit" class="yes">Add New User</button>
                        </div>
                     </div>
                  </fieldset>
               </form>
            </div>
         </section>
         <!--  Product Section -->
         <section class="content-section tools" id="products">
            <div class="container tools">
               <form class="px-4" id="productform">
                  <fieldset>
                     <legend>Enter Product Information</legend>
                     <div class="row g-3">
                        <div class="form-group col-md-4">
                           <select id="SupplierID" name="SupplierID">
                              <option value="" disabled selected>Select a supplier</option>
                           </select>
                        </div>
                        <div class="form-group col-md-4">
                           <input type="text" id="ProductName" name="ProductName" placeholder="Name"
                              aria-label="Product Name">
                        </div>
                        <div class="form-group col-md-4">
                           <input type="number" id="ProductNumber" name="Number" placeholder="Number" min="0"
                              aria-label="Product Number">
                        </div>
                        <div class="form-group col-md-12">
                           <button type="submit" class="yes">Add New Product</button>
                        </div>
                     </div>
                  </fieldset>
               </form>
            </div>
         </section>
         <!-- Supplier Section -->
         <section class="content-section tools" id="suppliers">
            <div class="container tools">
               <form class="px-4" id="supplierform">
                  <fieldset>
                     <legend>Enter Supplier Information</legend>
                     <div class="row g-3">
                        <div class="form-group col-md-4"></div>
                        <div class="form-group col-md-4">
                           <input type="text" id="SupplierName" name="SupplierName" placeholder="Name"
                              aria-label="Supplier Name">
                        </div>
                        <div class="form-group col-md-4"></div>
                        <div class="form-group col-md-12">
                           <button type="submit" class="yes">Add New Supplier</button>
                        </div>
                     </div>
                  </fieldset>
               </form>
            </div>
         </section>
      </div>
   </div>

   <footer>
      <p><small>CROSSFIRE NCR</small></p>
   </footer>
   <script>
      function toggleSection(sectionId) {
         var sections = document.querySelectorAll('.content-section');
         sections.forEach(function (section) {
            if (section.id === sectionId) {
               section.style.display = section.style.display === 'none' ? 'block' : 'none';
            } else {
               section.style.display = 'none';
            }
         });
      }
   </script>
</body>

</html>